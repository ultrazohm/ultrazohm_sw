-- -------------------------------------------------------------
-- 
-- File Name: hdl_prj/hdlsrc/uz_pmsm_model/uz_pmsm_model_src_uz_pmsm_model.vhd
-- Created: 2021-06-17 18:12:44
-- 
-- Generated by MATLAB 9.9 and HDL Coder 3.17
-- 
-- 
-- -------------------------------------------------------------
-- Rate and Clocking Details
-- -------------------------------------------------------------
-- Model base rate: 1e-08
-- Target subsystem base rate: 1e-08
-- Explicit user oversample request: 100x
-- 
-- 
-- Clock Enable  Sample Time
-- -------------------------------------------------------------
-- ce_out        1e-06
-- -------------------------------------------------------------
-- 
-- 
-- Output Signal                 Clock Enable  Sample Time
-- -------------------------------------------------------------
-- i_d                           ce_out        1e-06
-- i_q                           ce_out        1e-06
-- torque                        ce_out        1e-06
-- -------------------------------------------------------------
-- 
-- -------------------------------------------------------------


-- -------------------------------------------------------------
-- 
-- Module: uz_pmsm_model_src_uz_pmsm_model
-- Source Path: uz_pmsm_model/uz_pmsm_model
-- Hierarchy Level: 0
-- 
-- -------------------------------------------------------------
LIBRARY IEEE;
USE IEEE.std_logic_1164.ALL;
USE IEEE.numeric_std.ALL;

ENTITY uz_pmsm_model_src_uz_pmsm_model IS
  PORT( clk                               :   IN    std_logic;
        reset                             :   IN    std_logic;
        clk_enable                        :   IN    std_logic;
        u_d                               :   IN    std_logic_vector(31 DOWNTO 0);  -- single
        u_q                               :   IN    std_logic_vector(31 DOWNTO 0);  -- single
        omega_mech                        :   IN    std_logic_vector(31 DOWNTO 0);  -- single
        reset_1                           :   IN    std_logic;
        ce_out                            :   OUT   std_logic;
        i_d                               :   OUT   std_logic_vector(31 DOWNTO 0);  -- single
        i_q                               :   OUT   std_logic_vector(31 DOWNTO 0);  -- single
        torque                            :   OUT   std_logic_vector(31 DOWNTO 0)  -- single
        );
END uz_pmsm_model_src_uz_pmsm_model;


ARCHITECTURE rtl OF uz_pmsm_model_src_uz_pmsm_model IS

  -- Component Declarations
  COMPONENT uz_pmsm_model_src_uz_pmsm_model_tc
    PORT( clk                             :   IN    std_logic;
          reset                           :   IN    std_logic;
          clk_enable                      :   IN    std_logic;
          enb                             :   OUT   std_logic;
          enb_1_100_0                     :   OUT   std_logic;
          enb_1_100_1                     :   OUT   std_logic;
          enb_1_100_91                    :   OUT   std_logic
          );
  END COMPONENT;

  COMPONENT uz_pmsm_model_src_nfp_convert_single2double
    PORT( clk                             :   IN    std_logic;
          reset                           :   IN    std_logic;
          enb                             :   IN    std_logic;
          nfp_in                          :   IN    std_logic_vector(31 DOWNTO 0);  -- single
          nfp_out                         :   OUT   std_logic_vector(63 DOWNTO 0)  -- double
          );
  END COMPONENT;

  COMPONENT uz_pmsm_model_src_nfp_gain_pow2_double
    PORT( clk                             :   IN    std_logic;
          reset                           :   IN    std_logic;
          enb                             :   IN    std_logic;
          nfp_in1                         :   IN    std_logic_vector(63 DOWNTO 0);  -- double
          nfp_in2                         :   IN    std_logic;  -- ufix1
          nfp_in3                         :   IN    std_logic_vector(11 DOWNTO 0);  -- sfix12
          nfp_out                         :   OUT   std_logic_vector(63 DOWNTO 0)  -- double
          );
  END COMPONENT;

  COMPONENT uz_pmsm_model_src_nfp_mul_double
    PORT( clk                             :   IN    std_logic;
          reset                           :   IN    std_logic;
          enb                             :   IN    std_logic;
          nfp_in1                         :   IN    std_logic_vector(63 DOWNTO 0);  -- double
          nfp_in2                         :   IN    std_logic_vector(63 DOWNTO 0);  -- double
          nfp_out                         :   OUT   std_logic_vector(63 DOWNTO 0)  -- double
          );
  END COMPONENT;

  COMPONENT uz_pmsm_model_src_nfp_sub_double
    PORT( clk                             :   IN    std_logic;
          reset                           :   IN    std_logic;
          enb                             :   IN    std_logic;
          nfp_in1                         :   IN    std_logic_vector(63 DOWNTO 0);  -- double
          nfp_in2                         :   IN    std_logic_vector(63 DOWNTO 0);  -- double
          nfp_out                         :   OUT   std_logic_vector(63 DOWNTO 0)  -- double
          );
  END COMPONENT;

  COMPONENT uz_pmsm_model_src_nfp_add_double
    PORT( clk                             :   IN    std_logic;
          reset                           :   IN    std_logic;
          enb                             :   IN    std_logic;
          nfp_in1                         :   IN    std_logic_vector(63 DOWNTO 0);  -- double
          nfp_in2                         :   IN    std_logic_vector(63 DOWNTO 0);  -- double
          nfp_out                         :   OUT   std_logic_vector(63 DOWNTO 0)  -- double
          );
  END COMPONENT;

  COMPONENT uz_pmsm_model_src_nfp_convert_double2single
    PORT( clk                             :   IN    std_logic;
          reset                           :   IN    std_logic;
          enb                             :   IN    std_logic;
          nfp_in                          :   IN    std_logic_vector(63 DOWNTO 0);  -- double
          nfp_out                         :   OUT   std_logic_vector(31 DOWNTO 0)  -- single
          );
  END COMPONENT;

  -- Component Configuration Statements
  FOR ALL : uz_pmsm_model_src_uz_pmsm_model_tc
    USE ENTITY work.uz_pmsm_model_src_uz_pmsm_model_tc(rtl);

  FOR ALL : uz_pmsm_model_src_nfp_convert_single2double
    USE ENTITY work.uz_pmsm_model_src_nfp_convert_single2double(rtl);

  FOR ALL : uz_pmsm_model_src_nfp_gain_pow2_double
    USE ENTITY work.uz_pmsm_model_src_nfp_gain_pow2_double(rtl);

  FOR ALL : uz_pmsm_model_src_nfp_mul_double
    USE ENTITY work.uz_pmsm_model_src_nfp_mul_double(rtl);

  FOR ALL : uz_pmsm_model_src_nfp_sub_double
    USE ENTITY work.uz_pmsm_model_src_nfp_sub_double(rtl);

  FOR ALL : uz_pmsm_model_src_nfp_add_double
    USE ENTITY work.uz_pmsm_model_src_nfp_add_double(rtl);

  FOR ALL : uz_pmsm_model_src_nfp_convert_double2single
    USE ENTITY work.uz_pmsm_model_src_nfp_convert_double2single(rtl);

  -- Signals
  SIGNAL enb_1_100_0                      : std_logic;
  SIGNAL enb_1_100_1                      : std_logic;
  SIGNAL enb                              : std_logic;
  SIGNAL enb_1_100_91                     : std_logic;
  SIGNAL kconst                           : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay_out1                       : std_logic;
  SIGNAL Delay_out1_1                     : std_logic;
  SIGNAL Delay_out1_2                     : std_logic;
  SIGNAL kconst_1                         : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay1_out1                      : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL Data_Type_Conversion_out1        : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL kconst_2                         : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay6_out1                      : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL Data_Type_Conversion2_out1       : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL pw2_sign_const                   : std_logic;  -- ufix1
  SIGNAL pw2_shift_const                  : signed(11 DOWNTO 0);  -- sfix12
  SIGNAL Factor1_out1                     : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL kconst_3                         : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay2_out1                      : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL Data_Type_Conversion1_out1       : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL kconst_4                         : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL kconst_5                         : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay_iv                         : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay1_iv                        : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay_iv_1                       : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay1_iv_1                      : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL alpha_out1                       : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Sum3_out1                        : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay1_toDel                     : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay1_lowered_bypass_reg        : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay1_toDel_1                   : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay1_delOut                    : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay1_out1_1                    : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Sum3_out1_1                      : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay1_toDel_2                   : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay1_lowered1_bypass_reg       : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay1_toDel_3                   : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay1_delOut_1                  : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay1_out1_2                    : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL I_q_1                            : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL d_R_1_out1                       : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Product1_out1                    : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Sum1_op_stage2                   : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Sum1_out1                        : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Gain_out1                        : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay_toDel                      : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay_lowered1_bypass_reg        : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay_toDel_1                    : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay_delOut                     : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay_out1_3                     : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Product_out1                     : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL I_d_1                            : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL R_1_out1                         : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Sum_op_stage2                    : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Sum_out1                         : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Gain_out1_1                      : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay_toDel_2                    : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay_lowered_bypass_reg         : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay_toDel_3                    : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay_delOut_1                   : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Delay_out1_4                     : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Sum2_out1                        : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL I_d_2                            : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Data_Type_Conversion3_out1       : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL Delay3_bypass_reg                : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL Data_Type_Conversion3_out1_1     : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL Data_Type_Conversion3_out1_2     : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL t_ds_out                         : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL Delay3_out1                      : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL I_q_2                            : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Data_Type_Conversion4_out1       : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL Delay5_bypass_reg                : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL Data_Type_Conversion4_out1_1     : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL Data_Type_Conversion4_out1_2     : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL t1_ds_out                        : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL Delay5_out1                      : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL kconst_6                         : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Product3_out1                    : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Product2_out1                    : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Sum3_out1_2                      : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL M_Mi                             : std_logic_vector(63 DOWNTO 0);  -- ufix64
  SIGNAL Data_Type_Conversion5_out1       : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL Delay4_bypass_reg                : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL Data_Type_Conversion5_out1_1     : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL Data_Type_Conversion5_out1_2     : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL t2_ds_out                        : std_logic_vector(31 DOWNTO 0);  -- ufix32
  SIGNAL Delay4_out1                      : std_logic_vector(31 DOWNTO 0);  -- ufix32

BEGIN
  u_uz_pmsm_model_tc : uz_pmsm_model_src_uz_pmsm_model_tc
    PORT MAP( clk => clk,
              reset => reset,
              clk_enable => clk_enable,
              enb => enb,
              enb_1_100_0 => enb_1_100_0,
              enb_1_100_1 => enb_1_100_1,
              enb_1_100_91 => enb_1_100_91
              );

  u_uz_pmsm_model_uz_pmsm_model_nfp_convert_single2double : uz_pmsm_model_src_nfp_convert_single2double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in => Delay1_out1,  -- single
              nfp_out => Data_Type_Conversion_out1  -- double
              );

  u_uz_pmsm_model_uz_pmsm_model_nfp_convert_single2double_1 : uz_pmsm_model_src_nfp_convert_single2double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in => Delay6_out1,  -- single
              nfp_out => Data_Type_Conversion2_out1  -- double
              );

  u_nfp_gain_pow2_double : uz_pmsm_model_src_nfp_gain_pow2_double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in1 => Data_Type_Conversion2_out1,  -- double
              nfp_in2 => pw2_sign_const,  -- ufix1
              nfp_in3 => std_logic_vector(pw2_shift_const),  -- sfix12
              nfp_out => Factor1_out1  -- double
              );

  u_uz_pmsm_model_uz_pmsm_model_nfp_convert_single2double_2 : uz_pmsm_model_src_nfp_convert_single2double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in => Delay2_out1,  -- single
              nfp_out => Data_Type_Conversion1_out1  -- double
              );

  u_nfp_mul_comp : uz_pmsm_model_src_nfp_mul_double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in1 => kconst_5,  -- double
              nfp_in2 => Sum3_out1_1,  -- double
              nfp_out => I_q_1  -- double
              );

  u_nfp_mul_comp_1 : uz_pmsm_model_src_nfp_mul_double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in1 => kconst_4,  -- double
              nfp_in2 => I_q_1,  -- double
              nfp_out => d_R_1_out1  -- double
              );

  u_nfp_mul_comp_2 : uz_pmsm_model_src_nfp_mul_double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in1 => Factor1_out1,  -- double
              nfp_in2 => Sum3_out1,  -- double
              nfp_out => Product1_out1  -- double
              );

  u_nfp_sub_comp : uz_pmsm_model_src_nfp_sub_double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in1 => Data_Type_Conversion1_out1,  -- double
              nfp_in2 => Product1_out1,  -- double
              nfp_out => Sum1_op_stage2  -- double
              );

  u_nfp_sub_comp_1 : uz_pmsm_model_src_nfp_sub_double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in1 => Sum1_op_stage2,  -- double
              nfp_in2 => d_R_1_out1,  -- double
              nfp_out => Sum1_out1  -- double
              );

  u_nfp_mul_comp_3 : uz_pmsm_model_src_nfp_mul_double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in1 => kconst_3,  -- double
              nfp_in2 => Sum1_out1,  -- double
              nfp_out => Gain_out1  -- double
              );

  u_nfp_add_comp : uz_pmsm_model_src_nfp_add_double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in1 => Delay_out1_3,  -- double
              nfp_in2 => Delay1_out1_2,  -- double
              nfp_out => Sum3_out1_1  -- double
              );

  u_nfp_mul_comp_4 : uz_pmsm_model_src_nfp_mul_double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in1 => Factor1_out1,  -- double
              nfp_in2 => Sum3_out1_1,  -- double
              nfp_out => Product_out1  -- double
              );

  u_nfp_mul_comp_5 : uz_pmsm_model_src_nfp_mul_double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in1 => kconst_2,  -- double
              nfp_in2 => I_d_1,  -- double
              nfp_out => R_1_out1  -- double
              );

  u_nfp_sub_comp_2 : uz_pmsm_model_src_nfp_sub_double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in1 => Data_Type_Conversion_out1,  -- double
              nfp_in2 => R_1_out1,  -- double
              nfp_out => Sum_op_stage2  -- double
              );

  u_nfp_add_comp_1 : uz_pmsm_model_src_nfp_add_double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in1 => Sum_op_stage2,  -- double
              nfp_in2 => Product_out1,  -- double
              nfp_out => Sum_out1  -- double
              );

  u_nfp_mul_comp_6 : uz_pmsm_model_src_nfp_mul_double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in1 => kconst_1,  -- double
              nfp_in2 => Sum_out1,  -- double
              nfp_out => Gain_out1_1  -- double
              );

  u_nfp_add_comp_2 : uz_pmsm_model_src_nfp_add_double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in1 => Delay_out1_4,  -- double
              nfp_in2 => Delay1_out1_1,  -- double
              nfp_out => Sum3_out1  -- double
              );

  u_nfp_sub_comp_3 : uz_pmsm_model_src_nfp_sub_double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in1 => Sum3_out1,  -- double
              nfp_in2 => alpha_out1,  -- double
              nfp_out => Sum2_out1  -- double
              );

  u_nfp_mul_comp_7 : uz_pmsm_model_src_nfp_mul_double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in1 => kconst,  -- double
              nfp_in2 => Sum2_out1,  -- double
              nfp_out => I_d_1  -- double
              );

  u_uz_pmsm_model_uz_pmsm_model_nfp_convert_double2single : uz_pmsm_model_src_nfp_convert_double2single
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in => I_d_2,  -- double
              nfp_out => Data_Type_Conversion3_out1  -- single
              );

  u_uz_pmsm_model_uz_pmsm_model_nfp_convert_double2single_1 : uz_pmsm_model_src_nfp_convert_double2single
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in => I_q_2,  -- double
              nfp_out => Data_Type_Conversion4_out1  -- single
              );

  u_nfp_mul_comp_8 : uz_pmsm_model_src_nfp_mul_double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in1 => Sum3_out1,  -- double
              nfp_in2 => I_q_1,  -- double
              nfp_out => Product3_out1  -- double
              );

  u_nfp_mul_comp_9 : uz_pmsm_model_src_nfp_mul_double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in1 => I_d_1,  -- double
              nfp_in2 => Sum3_out1_1,  -- double
              nfp_out => Product2_out1  -- double
              );

  u_nfp_sub_comp_4 : uz_pmsm_model_src_nfp_sub_double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in1 => Product3_out1,  -- double
              nfp_in2 => Product2_out1,  -- double
              nfp_out => Sum3_out1_2  -- double
              );

  u_nfp_mul_comp_10 : uz_pmsm_model_src_nfp_mul_double
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in1 => kconst_6,  -- double
              nfp_in2 => Sum3_out1_2,  -- double
              nfp_out => M_Mi  -- double
              );

  u_uz_pmsm_model_uz_pmsm_model_nfp_convert_double2single_2 : uz_pmsm_model_src_nfp_convert_double2single
    PORT MAP( clk => clk,
              reset => reset,
              enb => enb,
              nfp_in => M_Mi,  -- double
              nfp_out => Data_Type_Conversion5_out1  -- single
              );

  kconst <= X"4059000000000000";

  Delay_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset = '1' THEN
        Delay_out1 <= '0';
      ELSIF enb_1_100_0 = '1' THEN
        Delay_out1 <= reset_1;
      END IF;
    END IF;
  END PROCESS Delay_process;


  Delay_out1_1 <= Delay_out1;

  reduced_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset = '1' THEN
        Delay_out1_2 <= '0';
      ELSIF enb = '1' THEN
        Delay_out1_2 <= Delay_out1_1;
      END IF;
    END IF;
  END PROCESS reduced_process;


  kconst_1 <= X"3eb0c6f7a0b5ed8d";

  Delay1_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset = '1' THEN
        Delay1_out1 <= X"00000000";
      ELSIF enb_1_100_0 = '1' THEN
        Delay1_out1 <= u_d;
      END IF;
    END IF;
  END PROCESS Delay1_process;


  kconst_2 <= X"4000cccccccccccd";

  Delay6_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset = '1' THEN
        Delay6_out1 <= X"00000000";
      ELSIF enb_1_100_0 = '1' THEN
        Delay6_out1 <= omega_mech;
      END IF;
    END IF;
  END PROCESS Delay6_process;


  pw2_sign_const <= '0';

  pw2_shift_const <= to_signed(16#001#, 12);

  kconst_3 <= X"3eb0c6f7a0b5ed8d";

  Delay2_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset = '1' THEN
        Delay2_out1 <= X"00000000";
      ELSIF enb_1_100_0 = '1' THEN
        Delay2_out1 <= u_q;
      END IF;
    END IF;
  END PROCESS Delay2_process;


  kconst_4 <= X"4000cccccccccccd";

  kconst_5 <= X"4034000000000000";

  Delay_iv <= X"0000000000000000";

  Delay1_iv <= X"0000000000000000";

  Delay_iv_1 <= X"0000000000000000";

  Delay1_iv_1 <= X"0000000000000000";

  alpha_out1 <= X"3fa999999999999a";

  
  Delay1_toDel <= Sum3_out1 WHEN Delay_out1_2 = '0' ELSE
      Delay1_iv_1;

  Delay1_lowered_bypass_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset = '1' THEN
        Delay1_lowered_bypass_reg <= X"0000000000000000";
      ELSIF enb_1_100_1 = '1' THEN
        Delay1_lowered_bypass_reg <= Delay1_toDel;
      END IF;
    END IF;
  END PROCESS Delay1_lowered_bypass_process;

  
  Delay1_toDel_1 <= Delay1_toDel WHEN enb_1_100_1 = '1' ELSE
      Delay1_lowered_bypass_reg;

  Delay1_delOut <= Delay1_toDel_1;

  
  Delay1_out1_1 <= Delay1_delOut WHEN Delay_out1_1 = '0' ELSE
      Delay1_iv_1;

  
  Delay1_toDel_2 <= Sum3_out1_1 WHEN Delay_out1_2 = '0' ELSE
      Delay1_iv;

  Delay1_lowered1_bypass_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset = '1' THEN
        Delay1_lowered1_bypass_reg <= X"0000000000000000";
      ELSIF enb_1_100_1 = '1' THEN
        Delay1_lowered1_bypass_reg <= Delay1_toDel_2;
      END IF;
    END IF;
  END PROCESS Delay1_lowered1_bypass_process;

  
  Delay1_toDel_3 <= Delay1_toDel_2 WHEN enb_1_100_1 = '1' ELSE
      Delay1_lowered1_bypass_reg;

  Delay1_delOut_1 <= Delay1_toDel_3;

  
  Delay1_out1_2 <= Delay1_delOut_1 WHEN Delay_out1_1 = '0' ELSE
      Delay1_iv;

  
  Delay_toDel <= Gain_out1 WHEN Delay_out1_2 = '0' ELSE
      Delay_iv;

  Delay_lowered1_bypass_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset = '1' THEN
        Delay_lowered1_bypass_reg <= X"0000000000000000";
      ELSIF enb_1_100_1 = '1' THEN
        Delay_lowered1_bypass_reg <= Delay_toDel;
      END IF;
    END IF;
  END PROCESS Delay_lowered1_bypass_process;

  
  Delay_toDel_1 <= Delay_toDel WHEN enb_1_100_1 = '1' ELSE
      Delay_lowered1_bypass_reg;

  Delay_delOut <= Delay_toDel_1;

  
  Delay_out1_3 <= Delay_delOut WHEN Delay_out1_1 = '0' ELSE
      Delay_iv;

  
  Delay_toDel_2 <= Gain_out1_1 WHEN Delay_out1_2 = '0' ELSE
      Delay_iv_1;

  Delay_lowered_bypass_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset = '1' THEN
        Delay_lowered_bypass_reg <= X"0000000000000000";
      ELSIF enb_1_100_1 = '1' THEN
        Delay_lowered_bypass_reg <= Delay_toDel_2;
      END IF;
    END IF;
  END PROCESS Delay_lowered_bypass_process;

  
  Delay_toDel_3 <= Delay_toDel_2 WHEN enb_1_100_1 = '1' ELSE
      Delay_lowered_bypass_reg;

  Delay_delOut_1 <= Delay_toDel_3;

  
  Delay_out1_4 <= Delay_delOut_1 WHEN Delay_out1_1 = '0' ELSE
      Delay_iv_1;

  I_d_2 <= I_d_1;

  Delay3_bypass_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset = '1' THEN
        Delay3_bypass_reg <= X"00000000";
      ELSIF enb_1_100_1 = '1' THEN
        Delay3_bypass_reg <= Data_Type_Conversion3_out1;
      END IF;
    END IF;
  END PROCESS Delay3_bypass_process;

  
  Data_Type_Conversion3_out1_1 <= Data_Type_Conversion3_out1 WHEN enb_1_100_1 = '1' ELSE
      Delay3_bypass_reg;

  Data_Type_Conversion3_out1_2 <= Data_Type_Conversion3_out1_1;

  -- Downsample register
  t_ds_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset = '1' THEN
        t_ds_out <= X"00000000";
      ELSIF enb_1_100_91 = '1' THEN
        t_ds_out <= Data_Type_Conversion3_out1_2;
      END IF;
    END IF;
  END PROCESS t_ds_process;


  -- Downsample output register
  t_output_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset = '1' THEN
        Delay3_out1 <= X"00000000";
      ELSIF enb_1_100_0 = '1' THEN
        Delay3_out1 <= t_ds_out;
      END IF;
    END IF;
  END PROCESS t_output_process;


  I_q_2 <= I_q_1;

  Delay5_bypass_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset = '1' THEN
        Delay5_bypass_reg <= X"00000000";
      ELSIF enb_1_100_1 = '1' THEN
        Delay5_bypass_reg <= Data_Type_Conversion4_out1;
      END IF;
    END IF;
  END PROCESS Delay5_bypass_process;

  
  Data_Type_Conversion4_out1_1 <= Data_Type_Conversion4_out1 WHEN enb_1_100_1 = '1' ELSE
      Delay5_bypass_reg;

  Data_Type_Conversion4_out1_2 <= Data_Type_Conversion4_out1_1;

  -- Downsample register
  t1_ds_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset = '1' THEN
        t1_ds_out <= X"00000000";
      ELSIF enb_1_100_91 = '1' THEN
        t1_ds_out <= Data_Type_Conversion4_out1_2;
      END IF;
    END IF;
  END PROCESS t1_ds_process;


  -- Downsample output register
  t1_output_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset = '1' THEN
        Delay5_out1 <= X"00000000";
      ELSIF enb_1_100_0 = '1' THEN
        Delay5_out1 <= t1_ds_out;
      END IF;
    END IF;
  END PROCESS t1_output_process;


  kconst_6 <= X"4008000000000000";

  Delay4_bypass_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset = '1' THEN
        Delay4_bypass_reg <= X"00000000";
      ELSIF enb_1_100_1 = '1' THEN
        Delay4_bypass_reg <= Data_Type_Conversion5_out1;
      END IF;
    END IF;
  END PROCESS Delay4_bypass_process;

  
  Data_Type_Conversion5_out1_1 <= Data_Type_Conversion5_out1 WHEN enb_1_100_1 = '1' ELSE
      Delay4_bypass_reg;

  Data_Type_Conversion5_out1_2 <= Data_Type_Conversion5_out1_1;

  -- Downsample register
  t2_ds_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset = '1' THEN
        t2_ds_out <= X"00000000";
      ELSIF enb_1_100_91 = '1' THEN
        t2_ds_out <= Data_Type_Conversion5_out1_2;
      END IF;
    END IF;
  END PROCESS t2_ds_process;


  -- Downsample output register
  t2_output_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset = '1' THEN
        Delay4_out1 <= X"00000000";
      ELSIF enb_1_100_0 = '1' THEN
        Delay4_out1 <= t2_ds_out;
      END IF;
    END IF;
  END PROCESS t2_output_process;


  ce_out <= enb_1_100_1;

  i_d <= Delay3_out1;

  i_q <= Delay5_out1;

  torque <= Delay4_out1;

END rtl;

