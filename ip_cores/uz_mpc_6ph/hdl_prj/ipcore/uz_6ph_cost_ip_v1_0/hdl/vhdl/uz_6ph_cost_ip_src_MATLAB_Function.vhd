-- -------------------------------------------------------------
-- 
-- File Name: hdl_prj\hdlsrc\uz_mpc_cost_and_optim_state_machine\uz_6ph_cost_ip_src_MATLAB_Function.vhd
-- Created: 2022-09-29 16:28:00
-- 
-- Generated by MATLAB 9.10 and HDL Coder 3.18
-- 
-- -------------------------------------------------------------


-- -------------------------------------------------------------
-- 
-- Module: uz_6ph_cost_ip_src_MATLAB_Function
-- Source Path: uz_mpc_cost_and_optim_state_machine/uz_6ph_mpc_costs_and_optimization/MATLAB Function
-- Hierarchy Level: 1
-- 
-- -------------------------------------------------------------
LIBRARY IEEE;
USE IEEE.std_logic_1164.ALL;
USE IEEE.numeric_std.ALL;
USE work.uz_6ph_cost_ip_src_uz_6ph_mpc_costs_and_optimization_pkg.ALL;

ENTITY uz_6ph_cost_ip_src_MATLAB_Function IS
  PORT( in_rsvd                           :   IN    matrix_of_std_logic(0 TO 63, 0 TO 11);  -- boolean [64x12]
        index                             :   IN    std_logic_vector(7 DOWNTO 0);  -- uint8
        last_optim_index                  :   IN    std_logic_vector(7 DOWNTO 0);  -- uint8
        G_next                            :   OUT   std_logic_vector(0 TO 5);  -- boolean [6]
        G_prev                            :   OUT   std_logic_vector(0 TO 5)  -- boolean [6]
        );
END uz_6ph_cost_ip_src_MATLAB_Function;


ARCHITECTURE rtl OF uz_6ph_cost_ip_src_MATLAB_Function IS

  -- Signals
  SIGNAL index_unsigned                   : unsigned(7 DOWNTO 0);  -- uint8
  SIGNAL last_optim_index_unsigned        : unsigned(7 DOWNTO 0);  -- uint8

BEGIN
  index_unsigned <= unsigned(index);

  last_optim_index_unsigned <= unsigned(last_optim_index);

  MATLAB_Function_output : PROCESS (in_rsvd, index_unsigned, last_optim_index_unsigned)
    VARIABLE sub_cast : vector_of_signed32(0 TO 5);
    VARIABLE cast : vector_of_signed64(0 TO 5);
    VARIABLE sub_cast_0 : vector_of_signed32(0 TO 5);
    VARIABLE cast_0 : vector_of_signed64(0 TO 5);
  BEGIN
    --MATLAB Function 'uz_6ph_mpc_costs_and_optimization/MATLAB Function'

    FOR t_0 IN 0 TO 5 LOOP
      sub_cast(t_0) := signed(resize(index_unsigned, 32));
      cast(t_0) := resize(to_signed(t_0, 32) & '0', 64);
      G_next(t_0) <= in_rsvd(to_integer(sub_cast(t_0) - 1), to_integer(resize(cast(t_0), 31)));
      sub_cast_0(t_0) := signed(resize(last_optim_index_unsigned, 32));
      cast_0(t_0) := resize(to_signed(t_0, 32) & '0', 64);
      G_prev(t_0) <= in_rsvd(to_integer(sub_cast_0(t_0) - 1), to_integer(resize(cast_0(t_0), 31)));
    END LOOP;

  END PROCESS MATLAB_Function_output;


END rtl;

